<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
    <entry key="updateStatus">
        Update tbl_status
           SET
                status_rent = ?,
                status_reserve = ?,
                user_code = ?,
                date_rent = ?,
                date_return = ?,
                date_end = ?
         WHERE status_rent = ? AND isbn=?
    </entry>

    <entry key="findUserCode">
        SELECT
            user_code
          FROM tbl_user
         WHERE name = ?
    </entry>

    <entry key="selectStatus">
        SELECT
            b.subject,
            s.status_rent,
            s.date_rent,
            s.date_return
        FROM tbl_book b
        JOIN tbl_status s ON b.ISBN = s.ISBN;
    </entry>

    <entry key="selectJoinStatus">
        SELECT
            A.SUBJECT,
            B.STATUS_RENT,
            B.STATUS_RESERVE,
            B.DATE_RENT,
            B.DATE_RETURN,
            B.ISBN,
            B.USER_CODE,
            B.DATE_END
        FROM
            TBL_BOOK A
        JOIN TBL_STATUS B
        ON
            A.ISBN = B.ISBN
        WHERE
            A.SUBJECT = ?
    </entry>

    <entry key="selectUser">
        SELECT
            name,
            phone,
            user_code
          FROM tbl_user
         WHERE name = ?
    </entry>

    <entry key="selectBorrowedUser">
        SELECT
            B.subject
          FROM tbl_book B
          JOIN tbl_status S
           ON S.ISBN = B.ISBN
         WHERE S.user_code = ?
            AND S.status_rent like '%ì¤‘'
    </entry>

    <entry key="selectAllUser">
        SELECT
            name,
            phone,
            user_code
        FROM tbl_user
    </entry>

    <entry key="deleteUser">
        DELETE FROM tbl_user
              WHERE name = ?
    </entry>

    <entry key="updatePhone">
        UPDATE tbl_user
           SET phone = ?
         WHERE name = ?
    </entry>

    <entry key="insertHistory">
        INSERT INTO TBL_HISTORY
            VALUES
            (?, ?, ?, ?, ?, ?, ?)
    </entry>

    <entry key="selectHistory">
        SELECT
            H.*,
            U.name
          FROM tbl_history H
          JOIN tbl_user U ON H.user_code = U.user_code;
    </entry>

</properties>